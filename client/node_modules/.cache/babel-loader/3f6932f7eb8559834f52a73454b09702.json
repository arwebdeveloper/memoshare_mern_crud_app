{"ast":null,"code":"import _regeneratorRuntime from\"/Users/macbookair/Desktop/memory-mernStack-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/macbookair/Desktop/memory-mernStack-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/macbookair/Desktop/memory-mernStack-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/macbookair/Desktop/memory-mernStack-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/macbookair/Desktop/memory-mernStack-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{GoogleLogin}from\"react-google-login\";import{Avatar,Button,Paper,Grid,Typography,Container}from\"@material-ui/core\";import LockOutlinedIcon from\"@material-ui/icons/LockOutlined\";import Icon from\"./icon\";import useStyles from\"./style\";import Input from\"./Input\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import{signIn,signUp}from\"../../redux_store/actions/auth\";var intialFormData={firstName:\"\",lastName:\"\",email:\"\",password:\"\",confirmPassword:\"\"};var Auth=function Auth(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPassword=_useState2[0],setShowPassword=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSignUp=_useState4[0],setIsSignUp=_useState4[1];var _useState5=useState(intialFormData),_useState6=_slicedToArray(_useState5,2),formData=_useState6[0],setFormData=_useState6[1];var dispatch=useDispatch();var classes=useStyles();var history=useHistory();var handleShowPassword=function handleShowPassword(){return setShowPassword(function(prevShowPassword){return!prevShowPassword;});};var handleSignInSignOut=function handleSignInSignOut(){return setIsSignUp(function(prevIsSignUp){return!prevIsSignUp;});};var handleChange=function handleChange(e){e.preventDefault();setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var googleSuccess=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var result,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"res\",res);result=res===null||res===void 0?void 0:res.profileObj;token=res===null||res===void 0?void 0:res.tokenId;try{dispatch({type:\"AUTH\",data:{result:result,token:token}});history.push(\"/\");}catch(error){console.log(error);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function googleSuccess(_x){return _ref.apply(this,arguments);};}();var googleFailure=function googleFailure(){console.log(\"Google login is not successfull, please try again later!\");};var handleSubmit=function handleSubmit(e){e.preventDefault();if(isSignUp){dispatch(signUp(formData,history));}else{dispatch(signIn(formData,history));}console.log(formData);};return/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(Avatar,{className:classes.avatar},/*#__PURE__*/React.createElement(LockOutlinedIcon,null)),/*#__PURE__*/React.createElement(Typography,null,isSignUp?\"Sign Up\":\"Sign In\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:2},isSignUp&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Input,{name:\"firstName\",label:\"First Name\",value:formData.firstName,handleChange:handleChange,half:true,autoFocus:true}),/*#__PURE__*/React.createElement(Input,{name:\"lastName\",label:\"Last Name\",value:formData.lastName,handleChange:handleChange,half:true})),/*#__PURE__*/React.createElement(Input,{name:\"email\",label:\"Email Address\",value:formData.email,handleChange:handleChange,type:\"email\"}),/*#__PURE__*/React.createElement(Input,{name:\"password\",label:\"Password\",value:formData.password,handleChange:handleChange,type:showPassword?\"text\":\"password\",handleShowPassword:handleShowPassword}),isSignUp&&/*#__PURE__*/React.createElement(Input,{name:\"confirmPassword\",label:\"Confirm Password\",value:formData.confirmPassword,handleChange:handleChange,type:\"password\"})),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",fullWidth:true,color:\"primary\",className:classes.submit},isSignUp?\"Sign Up\":\"Sign In\"),/*#__PURE__*/React.createElement(GoogleLogin,{clientId:process.env.REACT_APP_GOOGLE_CLIENT_ID,render:function render(renderProps){return/*#__PURE__*/React.createElement(Button,{className:classes.googleButton,color:\"primary\",fullWidth:true,onClick:renderProps.onClick,disabled:renderProps.disabled,startIcon:/*#__PURE__*/React.createElement(Icon,null),variant:\"contained\"},\"Google Sign In\");},onSuccess:googleSuccess,onFailure:googleFailure,cookiePolicy:\"single_host_origin\"}),/*#__PURE__*/React.createElement(Grid,{container:true,justifyContent:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Button,{onClick:handleSignInSignOut},isSignUp?\"Already have an acount? Sing In!\":\"Don't have an account ? Sign Up!\"))))));};export default Auth;","map":{"version":3,"sources":["/Users/macbookair/Desktop/memory-mernStack-app/client/src/components/Auth/Auth.js"],"names":["React","useState","GoogleLogin","Avatar","Button","Paper","Grid","Typography","Container","LockOutlinedIcon","Icon","useStyles","Input","useDispatch","useSelector","useHistory","signIn","signUp","intialFormData","firstName","lastName","email","password","confirmPassword","Auth","showPassword","setShowPassword","isSignUp","setIsSignUp","formData","setFormData","dispatch","classes","history","handleShowPassword","prevShowPassword","handleSignInSignOut","prevIsSignUp","handleChange","e","preventDefault","target","name","value","googleSuccess","res","console","log","result","profileObj","token","tokenId","type","data","push","error","googleFailure","handleSubmit","paper","avatar","form","submit","process","env","REACT_APP_GOOGLE_CLIENT_ID","renderProps","googleButton","onClick","disabled"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { GoogleLogin } from \"react-google-login\";\nimport {\n  Avatar,\n  Button,\n  Paper,\n  Grid,\n  Typography,\n  Container,\n} from \"@material-ui/core\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Icon from \"./icon\";\n\nimport useStyles from \"./style\";\nimport Input from \"./Input\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport {signIn,signUp} from \"../../redux_store/actions/auth\"\n\nconst intialFormData = {\n  firstName: \"\",\n  lastName: \"\",\n  email: \"\",\n  password: \"\",\n  confirmPassword: \"\",\n};\nconst Auth = () => {\n  const [showPassword, setShowPassword] = useState(false);\n  const [isSignUp, setIsSignUp] = useState(false);\n  const [formData, setFormData] = useState(intialFormData);\n  const dispatch = useDispatch();\n  \n  const classes = useStyles();\n  const history = useHistory();\n\n  const handleShowPassword = () =>\n    setShowPassword((prevShowPassword) => !prevShowPassword);\n\n  const handleSignInSignOut = () =>\n    setIsSignUp((prevIsSignUp) => !prevIsSignUp);\n\n  const handleChange = (e) => {\n    e.preventDefault();\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const googleSuccess = async (res) => {\n    console.log(\"res\", res);\n    const result = res?.profileObj;\n    const token = res?.tokenId;\n\n    try {\n      dispatch({ type: \"AUTH\", data: { result, token } });\n      history.push(\"/\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const googleFailure = () => {\n    console.log(\"Google login is not successfull, please try again later!\");\n  };\n\n  const handleSubmit = (e) => {\n      e.preventDefault()\n      if(isSignUp){\n          dispatch(signUp(formData,history))\n      }else{\n          dispatch(signIn(formData,history))\n      }\n    console.log(formData);\n  };\n\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <Paper className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography>{isSignUp ? \"Sign Up\" : \"Sign In\"}</Typography>\n        <form className={classes.form} onSubmit={handleSubmit}>\n          <Grid container spacing={2}>\n            {isSignUp && (\n              <>\n                <Input\n                  name=\"firstName\"\n                  label=\"First Name\"\n                  value={formData.firstName}\n                  handleChange={handleChange}\n                  half\n                  autoFocus\n                />\n                <Input\n                  name=\"lastName\"\n                  label=\"Last Name\"\n                  value={formData.lastName}\n                  handleChange={handleChange}\n                  half\n                />\n              </>\n            )}\n            <Input\n              name=\"email\"\n              label=\"Email Address\"\n              value={formData.email}\n              handleChange={handleChange}\n              type=\"email\"\n            />\n            <Input\n              name=\"password\"\n              label=\"Password\"\n              value={formData.password}\n              handleChange={handleChange}\n              type={showPassword ? \"text\" : \"password\"}\n              handleShowPassword={handleShowPassword}\n            />\n            {isSignUp && (\n              <Input\n                name=\"confirmPassword\"\n                label=\"Confirm Password\"\n                value={formData.confirmPassword}\n                handleChange={handleChange}\n                type=\"password\"\n              />\n            )}\n          </Grid>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            fullWidth\n            color=\"primary\"\n            className={classes.submit}\n          >\n            {isSignUp ? \"Sign Up\" : \"Sign In\"}\n          </Button>\n          <GoogleLogin\n            clientId={process.env.REACT_APP_GOOGLE_CLIENT_ID}\n            render={(renderProps) => (\n              <Button\n                className={classes.googleButton}\n                color=\"primary\"\n                fullWidth\n                onClick={renderProps.onClick}\n                disabled={renderProps.disabled}\n                startIcon={<Icon />}\n                variant=\"contained\"\n              >\n                Google Sign In\n              </Button>\n            )}\n            onSuccess={googleSuccess}\n            onFailure={googleFailure}\n            cookiePolicy=\"single_host_origin\"\n          />\n          <Grid container justifyContent=\"flex-end\">\n            <Grid item>\n              <Button onClick={handleSignInSignOut}>\n                {isSignUp\n                  ? \"Already have an acount? Sing In!\"\n                  : \"Don't have an account ? Sign Up!\"}\n              </Button>\n            </Grid>\n          </Grid>\n        </form>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}