{"ast":null,"code":"import _defineProperty from\"/Users/macbookair/Desktop/memory-mernStack-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/macbookair/Desktop/memory-mernStack-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/macbookair/Desktop/memory-mernStack-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Typography,TextField,Paper,Button}from\"@material-ui/core\";import FileBase from\"react-file-base64\";import{useDispatch,useSelector}from\"react-redux\";import useStyles from\"./style\";import{createPosts,updatePost}from\"../../redux_store/actions/posts\";var Form=function Form(_ref){var _user$result3;var currentId=_ref.currentId,setCurrentId=_ref.setCurrentId;var _useState=useState({title:\"\",message:\"\",tags:\"\",selectedFile:\"\"}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setPostData=_useState2[1];var post=useSelector(function(state){return currentId?state.posts.find(function(post){return post._id===currentId;}):null;});var dispatch=useDispatch();var classes=useStyles();var user=JSON.parse(localStorage.getItem('profile'));useEffect(function(){if(post){setPostData(post);}},[post]);var handleChange=function handleChange(e,prop){if(prop===\"tags\"){setPostData(_objectSpread(_objectSpread({},postData),{},_defineProperty({},prop,e.target.value.split(','))));}else{setPostData(_objectSpread(_objectSpread({},postData),{},_defineProperty({},prop,e.target.value)));}};var clear=function clear(){setCurrentId(null);setPostData({title:\"\",message:\"\",tags:\"\",selectedFile:\"\"});};var handleSubmit=function handleSubmit(e){e.preventDefault();if(currentId===0){var _user$result;dispatch(createPosts(_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name})));}else{var _user$result2;dispatch(updatePost(currentId,_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.name})));}clear();};if(!(user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.name)){return/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",align:\"center\"},\"Please Sign In to create your own memories and likes others memories\"));}return/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(\"form\",{className:\"\".concat(classes.root,\" \").concat(classes.form),autoComplete:\"off\",noValidate:true,onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},currentId?\"Editing\":\"Creating\",\" a Memory\"),/*#__PURE__*/React.createElement(TextField,{name:\"title\",variant:\"outlined\",label:\"Title\",value:postData.title,onChange:function onChange(e){return handleChange(e,\"title\");},fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{name:\"message\",variant:\"outlined\",label:\"Message\",value:postData.message,onChange:function onChange(e){return handleChange(e,\"message\");},fullWidth:true}),/*#__PURE__*/React.createElement(TextField,{name:\"tags\",variant:\"outlined\",label:\"Tags\",value:postData.tags,onChange:function onChange(e){return handleChange(e,\"tags\");},fullWidth:true}),/*#__PURE__*/React.createElement(\"div\",{className:classes.fileInput},/*#__PURE__*/React.createElement(FileBase,{type:\"file\",multiple:false,onDone:function onDone(_ref2){var base64=_ref2.base64;return setPostData(_objectSpread(_objectSpread({},postData),{},{selectedFile:base64}));}})),/*#__PURE__*/React.createElement(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"primary\",size:\"large\",type:\"submit\",fullWidth:true},\"Submit\"),/*#__PURE__*/React.createElement(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"secondary\",size:\"small\",onClick:clear,fullWidth:true},\"Clear\")));};export default Form;","map":{"version":3,"sources":["/Users/macbookair/Desktop/memory-mernStack-app/client/src/components/Form/Form.js"],"names":["React","useEffect","useState","Typography","TextField","Paper","Button","FileBase","useDispatch","useSelector","useStyles","createPosts","updatePost","Form","currentId","setCurrentId","title","message","tags","selectedFile","postData","setPostData","post","state","posts","find","_id","dispatch","classes","user","JSON","parse","localStorage","getItem","handleChange","e","prop","target","value","split","clear","handleSubmit","preventDefault","name","result","paper","root","form","fileInput","base64","buttonSubmit"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Typography, TextField, Paper, Button } from \"@material-ui/core\";\nimport FileBase from \"react-file-base64\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport useStyles from \"./style\";\nimport { createPosts, updatePost } from \"../../redux_store/actions/posts\";\n\nconst Form = ({ currentId, setCurrentId }) => {\n  const [postData, setPostData] = useState({\n    title: \"\",\n    message: \"\",\n    tags: \"\",\n    selectedFile: \"\",\n  });\n  const post = useSelector((state) =>\n    currentId ? state.posts.find((post) => post._id === currentId) : null\n  );\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const user = JSON.parse(localStorage.getItem('profile'));\n\n  useEffect(() => {\n    if (post) {\n      setPostData(post);\n    }\n  }, [post]);\n\n  const handleChange = (e, prop) => {\n    if(prop===\"tags\"){\n      setPostData({ ...postData, [prop]: e.target.value.split(',') });  \n    }else{\n      setPostData({ ...postData, [prop]: e.target.value });\n    }\n\n  };\n  \n  const clear = () => {\n    setCurrentId(null);\n    setPostData({\n      title: \"\",\n      message: \"\",\n      tags: \"\",\n      selectedFile: \"\",\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (currentId===0) {\n      dispatch(createPosts({...postData,name: user?.result?.name}));\n    } else {\n      dispatch(updatePost(currentId,{...postData,name: user?.result?.name}));\n    }\n    clear();\n  };\n\n  if(!user?.result?.name){\n    return (\n      <Paper className={classes.paper}>\n        <Typography variant=\"h6\" align=\"center\">\n          Please Sign In to create your own memories and likes others memories \n        </Typography>\n      </Paper>\n    )\n  }\n  return (\n    <Paper className={classes.paper}>\n      <form\n        className={`${classes.root} ${classes.form}`}\n        autoComplete=\"off\"\n        noValidate\n        onSubmit={handleSubmit}\n      >\n        <Typography variant=\"h6\">\n          {currentId ? \"Editing\" : \"Creating\"} a Memory\n        </Typography>\n        <TextField\n          name=\"title\"\n          variant=\"outlined\"\n          label=\"Title\"\n          value={postData.title}\n          onChange={(e) => handleChange(e, \"title\")}\n          fullWidth\n        />\n        <TextField\n          name=\"message\"\n          variant=\"outlined\"\n          label=\"Message\"\n          value={postData.message}\n          onChange={(e) => handleChange(e, \"message\")}\n          fullWidth\n        />\n        <TextField\n          name=\"tags\"\n          variant=\"outlined\"\n          label=\"Tags\"\n          value={postData.tags}\n          onChange={(e) => handleChange(e, \"tags\")}\n          fullWidth\n        />\n        <div className={classes.fileInput}>\n          <FileBase\n            type=\"file\"\n            multiple={false}\n            onDone={({ base64 }) =>\n              setPostData({ ...postData, selectedFile: base64 })\n            }\n          />\n        </div>\n        <Button\n          className={classes.buttonSubmit}\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"large\"\n          type=\"submit\"\n          fullWidth\n        >\n          Submit\n        </Button>\n        <Button\n          className={classes.buttonSubmit}\n          variant=\"contained\"\n          color=\"secondary\"\n          size=\"small\"\n          onClick={clear}\n          fullWidth\n        >\n          Clear\n        </Button>\n      </form>\n    </Paper>\n  );\n};\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}